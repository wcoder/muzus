!function(e,t){"use strict";function n(e){var t=parseInt(e/60%60),n=parseInt(e%60);return t+":"+(n<10?"0"+n:n)}function r(e,n,r){var u=t.createElement(e);return u.className=n,void 0!==r&&r.appendChild(u),u}function u(e,t){var n=r("input",e,t);return n.type="range",n.max=100,n.min=0,n.step=.01,n.value=0,n}function s(){var e=r("audio");return e.preload="metadata",e.type="audio/mpeg",e.volume=1,e}function a(t,n){function r(e){a&&a.stop(),a=e,c.src=a.src,a.play(),c.play()}function u(){c.pause(),c.currentTime=0,a.stop()}var a=null,o=[],c=s();c.onplaying=function(){a.setEndTime(c.duration)},c.ontimeupdate=function(){c.duration>0&&(a.setProgress(c.currentTime/c.duration*100),a.setCurrentTime(c.currentTime))},c.onprogress=function(){if(c.duration>0){var e=c.buffered.end(c.buffered.length-1)/c.duration*100;a.setBuffer(e)}},c.onended=function(){var e=a.id,t=e<o.length-1?e+1:0;1!=o.length?t<e&&!n?u():r(o[t]):u()},c.onerror=function(t){e.console.error(t),u(),a=null};for(var l=t.querySelectorAll("a"),m=0;m<l.length;m++){var f=new i(m,l[m]);f.setClickHandler(function(e){switch(e.getState()){case p:a.pause(),c.pause();break;case v:a.play(),c.play();break;default:r(e)}}),f.setChangeProgressHandler(function(e){c.duration?c.currentTime=e*c.duration/100:e=0}),o.push(f),function(t){var n=s();n.volume=0,n.src=t.src,n.onplaying=function(){n.pause(),t.setCurrentTime(0),t.setEndTime(n.duration),n=null},e.setTimeout(function(){n.play()},100)}(f)}}function i(e,t){var s=t.innerText,a=t.href,i=r("div",l);t.parentNode.replaceChild(i,t);var g=d,z=0,h=r("div","muzus-info",i),T=r("span","muzus-play-wrapper",h),y=r("span",o,T),N=r("span","muzus-title",h),C=r("span","muzus-time",h),w=r("span","muzus-time-current",C),E=r("span","muzus-time-end",C),S=r("div",m+" muzus-progress-hide",i),k=r("div","muzus-progress-buffer",S),P=r("div","muzus-progress-process",S),x=u("muzus-progress-spinner",S),H=r("div",f,S),b={};return b.id=e,b.src=a,b.title=s,b.play=function(){g=p,i.className=l+" muzus-track-active",y.className=c,S.className=m},b.pause=function(){g=v,i.className=l+" muzus-track-paused",y.className=o},b.stop=function(){g=d,i.className=l,y.className=o,S.className=m+" muzus-progress-hide",b.setCurrentTime(0),b.setProgress(0),b.setBuffer(0),b.hideProgressTimeHint()},b.getState=function(){return g},b.setCurrentTime=function(e){w.innerText=n(e)},b.setEndTime=function(e){z=e,E.innerText=n(e)},b.setProgress=function(e){P.style.width=e+"%",x.value=e},b.setBuffer=function(e){k.style.width=e+"%"},b.hideProgressTimeHint=function(){H.className=f},b.setClickHandler=function(e){y.addEventListener("click",function(){e(b)})},b.setChangeProgressHandler=function(e){x.addEventListener("input",function(t){g>0&&z>0&&e(t.target.value)})},N.innerText=s,x.addEventListener("mouseover",function(){g>0&&z>0&&(H.className=f+" muzus-progress-time-hint-show")}),x.addEventListener("mouseout",b.hideProgressTimeHint),x.addEventListener("mousemove",function(e){if(g>0&&z>0){var t=z*e.offsetX/x.offsetWidth;H.innerText=n(t),H.style.left=e.offsetX+"px"}}),b}var o="muzus-play",c="muzus-pause",l="muzus-track",m="muzus-progress",f="muzus-progress-time-hint",d=0,p=1,v=2,g={autoStart:!0,start:function(){for(var e=t.querySelectorAll(".muzus"),n=0;n<e.length;n++)new a(e[n],!1)}};return function(){e.Muzus&&"boolean"==typeof e.Muzus.autoStart&&(g.autoStart=e.Muzus.autoStart),g.autoStart&&g.start(),e.Muzus=g}}(window,document)();