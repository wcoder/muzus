!function(h,r){"use strict";var y="muzus-play",T="muzus-pause",M="muzus-track",b="muzus-progress",E="muzus-progress-time-hint",N=-1,P=0,k=1,C=2;function w(e){var n=h.parseInt(e/60/60),t=h.parseInt(e/60%60),e=h.parseInt(e%60);return(n?n+":":"")+(n&&t<10?"0"+t:t)+":"+(e<10?"0"+e:e)}function H(e,n,t){e=r.createElement(e);return e.className=n,void 0!==t&&t.appendChild(e),e}function f(){var e=H("audio");return e.preload="metadata",e.type="audio/mpeg",e.volume=1,e}function t(e){var t=null,r=[],s={isRepeat:e.getAttribute("data-repeat")||!1},n=f();n.onplaying=function(){t.sET(n.duration)},n.ontimeupdate=function(){0<n.duration&&(t.sP(n.currentTime/n.duration*100),t.sCT(n.currentTime))},n.onprogress=function(){var e;0<n.duration&&(e=n.buffered.end(n.buffered.length-1)/n.duration*100,t.sB(e))},n.onended=l,n.onerror=function(e){t.error(e),d(),t=null};for(var u=e.querySelectorAll("a"),i=0;i<u.length;i++){var a=new p(i,u[i]);a.sCH(o),a.sCPH(c),r.push(a),function(e){var n=f();n.volume=0,n.src=e.src,n.onplaying=function(){n.pause(),e.sCT(0),e.sET(n.duration),n=null},n.onerror=e.error,h.setTimeout(function(){n.play()},100)}(a)}function o(e){switch(e.gS()){case k:t.pause(),n.pause();break;case C:t.play(),n.play();break;case N:return;default:m(e)}}function c(e){n.duration&&(n.currentTime=e*n.duration/100)}function l(){var e=t.id,n=e<r.length-1?e+1:0;1==r.length||n<e&&!s.isRepeat?d():m(r[n])}function m(e){t&&t.stop(),(t=e).gS()!==N?(n.src=t.src,t.play(),n.play()):l()}function d(){n.pause(),n.currentTime=0,t.stop()}}function p(e,n){var t=n.innerHTML,r=n.href,s=H("div",M);n.parentNode.replaceChild(s,n);var u=P,i=0,a=H("div","muzus-info",s),o=H("span","muzus-play-wrapper",a),c=H("span",y,o),n=H("span","muzus-title",a),a=H("span","muzus-time",a),l=H("span","muzus-time-current",a),m=H("span","muzus-time-end",a),d=H("div",b+" muzus-progress-hide",s),f=H("div","muzus-progress-buffer",d),p=H("div","muzus-progress-process",d),g=((a=H("input","muzus-progress-spinner",a=d)).type="range",a.max=100,a.min=0,a.step=.01,a.value=0,a),v=H("div",E,d),z={};return z.id=e,z.src=r,z.play=function(){u!==N&&(u=k,s.className=M+" muzus-track-active",c.className=T,d.className=b)},z.pause=function(){u!==N&&(u=C,s.className=M+" muzus-track-paused",c.className=y)},z.stop=function(){u!==N&&(u=P,s.className=M,c.className=y,d.className=b+" muzus-progress-hide",z.sCT(0),z.sP(0),z.sB(0),z.hPTH())},z.gS=function(){return u},z.sCT=function(e){l.innerText=w(e)},z.sET=function(e){i=e,m.innerText=w(e)},z.sP=function(e){p.style.width=e+"%",g.value=e},z.sB=function(e){f.style.width=e+"%"},z.hPTH=function(){v.className=E},z.sCH=function(e){o.addEventListener("click",function(){e(z)})},z.sCPH=function(n){g.addEventListener("input",function(e){0<u&&0<i&&n(e.target.value)})},z.error=function(e){u!==N&&(u=N,s.className=M+" muzus-track-error",e&&e.srcElement&&h.console.error("MUZUS error:",e.srcElement.src,e.srcElement.error))},n.innerHTML=t,I.isMobile()||(g.addEventListener("mouseover",function(){0<u&&0<i&&(v.className=E+" muzus-progress-time-hint-show")}),g.addEventListener("mouseout",z.hPTH),g.addEventListener("mousemove",function(e){var n;0<u&&0<i&&(n=i*e.offsetX/g.offsetWidth,v.innerText=w(n),v.style.left=e.offsetX+"px")})),z}var I={autoInit:!0,init:function(){for(var e=r.querySelectorAll(".muzus"),n=0;n<e.length;n++)t(e[n])},isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(h.navigator.userAgent)}};return function(){h.Muzus&&("boolean"==typeof h.Muzus.autoInit&&(I.autoInit=h.Muzus.autoInit),"function"==typeof h.Muzus.isMobile&&(I.isMobile=h.Muzus.isMobile)),I.autoInit&&I.init(),h.Muzus=I}}(window,document)();